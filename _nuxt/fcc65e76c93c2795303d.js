(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{395:function(t,e,r){var content=r(396);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("7132a15d",content,!0,{sourceMap:!1})},396:function(t,e,r){(e=r(15)(!1)).push([t.i,".theme--light.v-divider{border-color:rgba(0,0,0,.12)}.theme--dark.v-divider{border-color:hsla(0,0%,100%,.12)}.v-divider{display:block;flex:1 1 0px;max-width:100%;height:0;max-height:0;border:solid;border-width:thin 0 0;transition:inherit}.v-divider--inset:not(.v-divider--vertical){max-width:calc(100% - 72px)}.v-application--is-ltr .v-divider--inset:not(.v-divider--vertical){margin-left:72px}.v-application--is-rtl .v-divider--inset:not(.v-divider--vertical){margin-right:72px}.v-divider--vertical{align-self:stretch;border:solid;border-width:0 thin 0 0;display:inline-flex;height:inherit;min-height:100%;max-height:100%;max-width:0;width:0;vertical-align:text-bottom}.v-divider--vertical.v-divider--inset{margin-top:8px;min-height:0;max-height:calc(100% - 16px)}",""]),t.exports=e},398:function(t,e,r){"use strict";r(12),r(10),r(7),r(5),r(11);var n=r(2),o=(r(395),r(28));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=o.a.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(t){var e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:c({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:c({role:"separator","aria-orientation":e},this.$attrs),on:this.$listeners})}})},448:function(t,e,r){"use strict";r.r(e);r(216),r(31),r(32),r(51),r(22),r(40);var n=r(13),o=r(95),l=r.n(o),c={asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,v,d,h,map,m,_,i,f,w,y,x,k,j,O,$,C,P,N,S,V,M,label,D,I,J,R,T,U,z,B,E,A,H,L,F,G,canvas,K,Q,W,X,Y,Z,tt,et;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,n=t.app,!r){e.next=5;break}return e.abrupt("return",r);case 5:return o="https://genji.dl.itc.u-tokyo.ac.jp",e.next=8,l.a.get(o+"/data/info.json").then((function(data){return data.data}));case 8:return c=e.sent,v=Number(n.context.params.vol),d=o+"/data/vol/"+("0000000000"+v).slice(-2)+"/curation.json",e.next=13,l.a.get(d).then((function(data){return data.data}));case 13:for(h=e.sent,map={},m=1,_=c.selections,i=0;i<_.length;i++)for(f=_[i],w=f.members,y=0;y<w.length;y++)x=w[y],map[m]=x.label,m+=1;k=n.context.params.id,j={},O=h.label,_=h.selections,$={},C={taisei:{label:"校異源氏物語",check:"校異源氏物語"},zenshu:{label:"新編日本古典文学全集",check:"新編日本古典文学全集"}},P=0;case 25:if(!(P<_.length)){e.next=56;break}N=_[P],S=N.members,V=0;case 29:if(!(V<S.length)){e.next=53;break}if(M=S[V],"脱文・錯簡"===(label=M.label)){for(D=N.within.label,j[D]||(j[D]=[]),I={},J=M.metadata,R=0;R<J.length;R++)T=J[R],I[T.label]=T.value;U=M["@id"],z=U.split("#xywh="),B=z[0],E=z[1].split(","),A=Number(E[1])-150,H=Number(E[3])+150,U=B+"#xywh="+E[0]+","+A+","+E[2]+","+H,j[D].push({page:I.Page,description:I.Text,type:I.Type,url:o+"/mirador3/?params="+encodeURIComponent(JSON.stringify([{manifest:N.within["@id"],canvas:U}]))+"&annotationState=on"})}if("zenshu"!==k){e.next=38;break}if(label.includes(C[k].check)){e.next=36;break}return e.abrupt("continue",50);case 36:e.next=40;break;case 38:if(label.includes(C[k].check)){e.next=40;break}return e.abrupt("continue",50);case 40:L=Number(label.split(" ")[1].split(".")[1]),$[L]||($[L]={windows:[]}),F=M["@id"],G=F.split("#xywh="),canvas=G[0],K=G[1].split(","),Q=Number(K[1])-150,W=Number(K[3])+150,F=canvas+"#xywh="+K[0]+","+Q+","+K[2]+","+W,$[L].windows.push({manifestId:N.within["@id"],canvas:M["@id"],label:N.within.label,url:o+"/mirador3/?params="+encodeURIComponent(JSON.stringify([{manifest:N.within["@id"],canvas:F}]))+"&annotationState=on"});case 50:V++,e.next=29;break;case 53:P++,e.next=25;break;case 56:for(X in $){for(Y=[],Z=$[X],tt=0;tt<Z.windows.length;tt++)et=Z.windows[tt],Y.push({manifest:et.manifestId,canvas:et.canvas});$[X].comp_url=o+"/mirador/?params="+encodeURIComponent(JSON.stringify(Y))+"&annotationState=on&sidePanel=false"}return e.abrupt("return",{infoMap:map,vol:v,jo:O,curationUri:d,pageMap:$,errs:j,config:C});case 58:case"end":return e.stop()}}),e)})))()},data:function(){return{headers:[{text:"頁数",value:"page"}],comp_url:null}},watch:{$route:function(){this.vol=-1,this.id=this.$route.params.id,this.search()}},head:function(){return{title:this.$t("browse_by_page")+" 『"+this.$t(this.config[this.$route.params.id].label)+"』"+(-1!==this.vol?"("+this.vol+" "+this.jo+")":"")}}},v=r(46),d=r(75),h=r.n(d),m=r(449),_=r(164),f=r(387),w=r(386),y=r(398),x=r(404),k=r(359),component=Object(v.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-5"},[r("div",{staticClass:"container"},[r("v-card",{attrs:{flat:""}},[r("v-card-title",[r("h2",{staticClass:"mb-5"},[t._v("\n          "+t._s(t.$t("browse_by_page"))+" 『"+t._s(t.$t(t.config[this.$route.params.id].label))+"』"),-1!=t.vol?[t._v("（"+t._s(t.vol)+" "+t._s(t.jo)+"）")]:t._e()],2),t._v(" "),r("v-spacer"),t._v(" "),-1!=t.vol?[t.vol-1>0?r("v-btn",{staticClass:"ma-2",attrs:{color:"primary",to:t.localePath({name:"search-id-vol",params:{id:t.$route.params.id,vol:t.vol-1}})}},[t._v("\n            "+t._s(t.vol-1)+" "+t._s(t.infoMap[t.vol-1])+" へ\n          ")]):t._e(),t._v(" "),t.vol+1<=54?r("v-btn",{staticClass:"ma-2",attrs:{color:"primary",to:t.localePath({name:"search-id-vol",params:{id:t.$route.params.id,vol:t.vol+1}})}},[t._v("\n            "+t._s(t.vol+1)+" "+t._s(t.infoMap[t.vol+1])+" へ\n          ")]):t._e()]:t._e()],2),t._v(" "),Object.keys(t.errs).length>0?r("v-alert",{staticClass:"my-5",attrs:{type:"warning",text:""}},[t._v("\n        脱文・錯簡あり："+t._s(Object.keys(t.errs).join(", "))+"\n      ")]):t._e(),t._v(" "),r("v-simple-table",[r("thead",[r("tr",[r("th",[t._v(t._s(t.$t("pageNum")))]),t._v(" "),r("th",[t._v(t._s(t.$t("画像をみる")))]),t._v(" "),r("th",[t._v(t._s(t.$t("並べて比較")))])])]),t._v(" "),r("tbody",t._l(t.pageMap,(function(e,n){return r("tr",{key:n},[r("td",[t._v(t._s(n))]),t._v(" "),r("td",t._l(e.windows,(function(e,n){return r("v-btn",{key:n,staticClass:"ma-2",attrs:{small:"",href:e.url,target:"_blank",link:""}},[t._v("\n                "+t._s(e.label)+"\n              ")])})),1),t._v(" "),r("td",[e.comp_url?r("a",{attrs:{href:e.comp_url,target:"_blank"}},[r("img",{staticClass:"m-2",attrs:{src:"https://iiif.dl.itc.u-tokyo.ac.jp/images/mirador.png"}})]):t._e()])])})),0)]),t._v(" "),Object.keys(t.errs).length>0?[r("h3",{staticClass:"mt-10 mb-5 error--text"},[t._v("脱文・錯簡")]),t._v(" "),r("v-simple-table",[r("thead",[r("tr",[r("th"),t._v(" "),r("th",[t._v(t._s(t.$t("imageNum")))]),t._v(" "),r("th",{attrs:{width:"40%"}},[t._v(t._s(t.$t("explanation")))]),t._v(" "),r("th",[t._v(t._s(t.$t("type")))]),t._v(" "),r("th",[t._v(t._s(t.$t("画像をみる")))])])]),t._v(" "),r("tbody",[t._l(t.errs,(function(e,n){return t._l(e,(function(e,o){return r("tr",{key:n+"-"+o},[r("td",[t._v(t._s(n))]),t._v(" "),r("td",[t._v(t._s(e.page))]),t._v(" "),r("td",[r("div",{staticClass:"py-2",domProps:{innerHTML:t._s(e.description)}})]),t._v(" "),r("td",[t._v(t._s(e.type))]),t._v(" "),r("td",[r("a",{attrs:{href:e.url,target:"_blank"}},[r("img",{staticClass:"m-2",attrs:{src:"https://iiif.dl.itc.u-tokyo.ac.jp/images/mirador.png"}})])])])}))}))],2)])]:t._e(),t._v(" "),r("v-divider",{staticClass:"my-5"}),t._v(" "),r("v-card-title",[r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"ma-2",attrs:{target:"_blank",small:"",href:"http://codh.rois.ac.jp/software/iiif-curation-viewer/demo/?curation="+t.curationUri+"&mode=annotation"}},[t._v("\n          "+t._s(t.$t("Curation Viewerでみる"))+"\n          "),r("i",{staticClass:"mdi mdi-open-in-new"})])],1)],2)],1)])}),[],!1,null,null,null);e.default=component.exports;h()(component,{VAlert:m.a,VBtn:_.a,VCard:f.a,VCardTitle:w.c,VDivider:y.a,VSimpleTable:x.a,VSpacer:k.a})}}]);