(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{465:function(t,e,n){"use strict";var r=n(27),o=n(38),c=n(35),l=n(23),v=n(11),d=(n(13),n(4),n(74),n(81));function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(l.a)(t);if(e){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var f=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},_=function(t){Object(o.a)(n,t);var e=h(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return n}(d.Vue);f([Object(d.Prop)({required:!0})],_.prototype,"items",void 0);var m=_=f([d.Component],_),y=n(75),w=n(97),x=n.n(w),k=n(475),j=n(455),C=n(209),$=n(65),component=Object(y.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-sheet",{attrs:{color:"grey lighten-2"}},[n("v-container",{staticClass:"py-2 px-0 mx-0",attrs:{fluid:""}},[n("v-breadcrumbs",{staticClass:"py-0",attrs:{items:t.items},scopedSlots:t._u([{key:"divider",fn:function(){return[n("v-icon",[t._v("mdi-chevron-right")])]},proxy:!0}])})],1)],1)}),[],!1,null,null,null);e.a=component.exports;x()(component,{VBreadcrumbs:k.a,VContainer:j.a,VIcon:C.a,VSheet:$.a})},568:function(t,e,n){"use strict";n.r(e);var r=n(16),o=(n(58),n(29),n(40),n(19),n(59),n(30),n(43),n(230),n(113)),c=n.n(o),l={components:{Breadcrumbs:n(465).a},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,l,v,d,h,map,f,_,i,m,y,w,x,k,j,C,$,O,R,V,N,P,S,label,B,I,M,J,T,U,D,z,E,A,H,L,F,G,canvas,K,Q,W,X,Y,Z,tt,et;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload,r=t.app,!n){e.next=5;break}return e.abrupt("return",n);case 5:return o="https://genji.dl.itc.u-tokyo.ac.jp",e.next=8,c.a.get(o+"/data/info.json").then((function(data){return data.data}));case 8:return l=e.sent,v=Number(r.context.params.vol),d=o+"/data/vol/"+("0000000000"+v).slice(-2)+"/curation.json",e.next=13,c.a.get(d).then((function(data){return data.data}));case 13:for(h=e.sent,map={},f=1,_=l.selections,i=0;i<_.length;i++)for(m=_[i],y=m.members,w=0;w<y.length;w++)x=y[w],map[f]=x.label,f+=1;k=r.context.params.id,j={},C=h.label,_=h.selections,$={},O={taisei:{label:"校異源氏物語",check:"校異源氏物語"},zenshu:{label:"新編日本古典文学全集",check:"新編日本古典文学全集"}},R=0;case 25:if(!(R<_.length)){e.next=56;break}V=_[R],N=V.members,P=0;case 29:if(!(P<N.length)){e.next=53;break}if(S=N[P],"脱文・錯簡"===(label=S.label)){for(B=V.within.label,j[B]||(j[B]=[]),I={},M=S.metadata,J=0;J<M.length;J++)T=M[J],I[T.label]=T.value;U=S["@id"],D=U.split("#xywh="),z=D[0],E=D[1].split(","),A=Number(E[1])-150,H=Number(E[3])+150,U=z+"#xywh="+E[0]+","+A+","+E[2]+","+H,j[B].push({page:I.Page,description:I.Text,type:I.Type,url:o+"/mirador3/?params="+encodeURIComponent(JSON.stringify([{manifest:V.within["@id"],canvas:U}]))+"&annotationState=on"})}if("zenshu"!==k){e.next=38;break}if(label.includes(O[k].check)){e.next=36;break}return e.abrupt("continue",50);case 36:e.next=40;break;case 38:if(label.includes(O[k].check)){e.next=40;break}return e.abrupt("continue",50);case 40:L=Number(label.split(" ")[1].split(".")[1]),$[L]||($[L]={windows:[]}),F=S["@id"],G=F.split("#xywh="),canvas=G[0],K=G[1].split(","),Q=Number(K[1])-150,W=Number(K[3])+150,F=canvas+"#xywh="+K[0]+","+Q+","+K[2]+","+W,$[L].windows.push({manifestId:V.within["@id"],canvas:S["@id"],label:V.within.label,url:o+"/mirador3/?params="+encodeURIComponent(JSON.stringify([{manifest:V.within["@id"],canvas:F}]))+"&annotationState=on"});case 50:P++,e.next=29;break;case 53:R++,e.next=25;break;case 56:for(X in $){for(Y=[],Z=$[X],tt=0;tt<Z.windows.length;tt++)et=Z.windows[tt],Y.push({manifest:et.manifestId,canvas:et.canvas});$[X].comp_url=o+"/mirador/?params="+encodeURIComponent(JSON.stringify(Y))+"&annotationState=on&sidePanel=false"}return e.abrupt("return",{infoMap:map,vol:v,jo:C,curationUri:d,pageMap:$,errs:j,config:O});case 58:case"end":return e.stop()}}),e)})))()},data:function(){return{headers:[{text:"頁数",value:"page"}],comp_url:null}},head:function(){return{title:this.$t("browse_by_page")+" "+this.title}},computed:{title:function(){return" 『"+this.$t(this.config[this.$route.params.id].label)+"』"+(-1!==this.vol?"("+this.vol+" "+this.jo+")":"")},bh:function(){return[{text:this.$t("top"),disabled:!1,to:this.localePath({name:"index"}),exact:!0},{text:this.$t("browse_by_page"),disabled:!1,to:this.localePath({name:"search"}),exact:!0},{text:this.title}]}},watch:{$route:function(){this.vol=-1,this.id=this.$route.params.id,this.search()}}},v=n(75),d=n(97),h=n.n(d),f=n(498),_=n(227),m=n(468),y=n(464),w=n(484),x=n(487),k=n(459),component=Object(v.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-5"},[n("Breadcrumbs",{attrs:{items:t.bh}}),t._v(" "),n("div",{staticClass:"container"},[n("v-card",{attrs:{flat:""}},[n("v-card-title",[n("h2",{staticClass:"mb-5"},[t._v("\n          『"+t._s(t.$t(t.config[t.$route.params.id].label))+"』"),-1!=t.vol?[t._v("（"+t._s(t.vol)+" "+t._s(t.jo)+"）")]:t._e()],2),t._v(" "),n("v-spacer"),t._v(" "),-1!=t.vol?[t.vol-1>0?n("v-btn",{staticClass:"ma-2",attrs:{color:"primary",to:t.localePath({name:"search-id-vol",params:{id:t.$route.params.id,vol:t.vol-1}})}},[t._v("\n            "+t._s(t.vol-1)+" "+t._s(t.infoMap[t.vol-1])+" へ\n          ")]):t._e(),t._v(" "),t.vol+1<=54?n("v-btn",{staticClass:"ma-2",attrs:{color:"primary",to:t.localePath({name:"search-id-vol",params:{id:t.$route.params.id,vol:t.vol+1}})}},[t._v("\n            "+t._s(t.vol+1)+" "+t._s(t.infoMap[t.vol+1])+" へ\n          ")]):t._e()]:t._e()],2),t._v(" "),Object.keys(t.errs).length>0?n("v-alert",{staticClass:"my-5",attrs:{type:"warning",text:""}},[t._v("\n        脱文・錯簡あり："+t._s(Object.keys(t.errs).join(", "))+"\n      ")]):t._e(),t._v(" "),n("v-simple-table",[n("thead",[n("tr",[n("th",[t._v(t._s(t.$t("pageNum")))]),t._v(" "),n("th",[t._v(t._s(t.$t("画像をみる")))]),t._v(" "),n("th",[t._v(t._s(t.$t("並べて比較")))])])]),t._v(" "),n("tbody",t._l(t.pageMap,(function(e,r){return n("tr",{key:r},[n("td",[t._v(t._s(r))]),t._v(" "),n("td",t._l(e.windows,(function(e,r){return n("v-btn",{key:r,staticClass:"ma-2",attrs:{small:"",href:e.url,target:"_blank",link:""}},[t._v("\n                "+t._s(e.label)+"\n              ")])})),1),t._v(" "),n("td",[e.comp_url?n("a",{attrs:{href:e.comp_url,target:"_blank"}},[n("img",{staticClass:"m-2",attrs:{src:"https://iiif.dl.itc.u-tokyo.ac.jp/images/mirador.png"}})]):t._e()])])})),0)]),t._v(" "),Object.keys(t.errs).length>0?[n("h3",{staticClass:"mt-10 mb-5 error--text"},[t._v("脱文・錯簡")]),t._v(" "),n("v-simple-table",[n("thead",[n("tr",[n("th"),t._v(" "),n("th",[t._v(t._s(t.$t("imageNum")))]),t._v(" "),n("th",{attrs:{width:"40%"}},[t._v(t._s(t.$t("explanation")))]),t._v(" "),n("th",[t._v(t._s(t.$t("type")))]),t._v(" "),n("th",[t._v(t._s(t.$t("画像をみる")))])])]),t._v(" "),n("tbody",[t._l(t.errs,(function(e,r){return t._l(e,(function(e,o){return n("tr",{key:r+"-"+o},[n("td",[t._v(t._s(r))]),t._v(" "),n("td",[t._v(t._s(e.page))]),t._v(" "),n("td",[n("div",{staticClass:"py-2",domProps:{innerHTML:t._s(e.description)}})]),t._v(" "),n("td",[t._v(t._s(e.type))]),t._v(" "),n("td",[n("a",{attrs:{href:e.url,target:"_blank"}},[n("img",{staticClass:"m-2",attrs:{src:"https://iiif.dl.itc.u-tokyo.ac.jp/images/mirador.png"}})])])])}))}))],2)])]:t._e(),t._v(" "),n("v-divider",{staticClass:"my-5"}),t._v(" "),n("v-card-title",[n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"ma-2",attrs:{target:"_blank",small:"",href:"http://codh.rois.ac.jp/software/iiif-curation-viewer/demo/?curation="+t.curationUri+"&mode=annotation"}},[t._v("\n          "+t._s(t.$t("Curation Viewerでみる"))+"\n          "),n("i",{staticClass:"mdi mdi-open-in-new"})])],1)],2)],1)],1)}),[],!1,null,null,null);e.default=component.exports;h()(component,{VAlert:f.a,VBtn:_.a,VCard:m.a,VCardTitle:y.c,VDivider:w.a,VSimpleTable:x.a,VSpacer:k.a})}}]);